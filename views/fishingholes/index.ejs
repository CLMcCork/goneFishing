<% layout('layouts/boilerplate') %> 

<div id="map" style="width: 100%; height: 500px"></div>

<h1>All Fishing Holes!</h1>
<div>
    <a href="/fishingholes/new">Add Fishing Hole</a>
</div>

    <% for (let fishinghole of fishingholes) { %>
    <div class="card" mb-3>
        <div class="col-md-4">
            <% if(fishinghole.images.length) { %>
            <img class="img-fluid" alt="Fishing Hole Image" src="<%= fishinghole.images[0].url %>">
            <% } else { %>
            <img class="img-fluid" alt="Fishing Hole Image">
                src="https://res.cloudinary.com/dvtbkorbp/image/upload/v1626130508/goneFishing/v96o6yivg96dmcm76zlw.jpg"
            <% } %>
        </div>
        <div class="col-md-8">
        <div class="card-body">
            <h5 class="card-title"><%= fishinghole.title %></h5>
            <p class="card-text"><%= fishinghole.description %></p>
            <p class="card-text">
                <small class="text-muted"><%= fishinghole.location %></small>
            </p>
            <a class="btn btn-primary" href="/fishingholes/<%= fishinghole._id %>">View <%= fishinghole.title %></a>
        </div>
        </div>
    </div>
    <% } %> 


<script>
    const mapToken = '<%- process.env.MAPBOX_TOKEN %>';
</script>
<script src="/javascripts/clusterMap.js"></script>